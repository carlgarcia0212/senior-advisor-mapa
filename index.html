<!DOCTYPE html>
<html>
<head>
  <title>Mapa con Residencias</title>
  <meta charset="utf-8">
  <style>
    html, body, #map {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    let map;

    async function initMap() {
      // Crear mapa centrado en Santiago
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: -33.45, lng: -70.65 },
        zoom: 12
      });

      try {
        // Cargar residencias.json desde GitHub Pages
        const response = await fetch("https://carlgarcia0212.github.io/senior-advisor-mapa/residencias.json");
        const hogares = await response.json();

        console.log("Residencias cargadas:", hogares.length);

        // Crear markers para cada residencia
        hogares.forEach(hogar => {
          if (hogar.latitud_google && hogar.longitud_google) {
            new google.maps.Marker({
              position: { lat: hogar.latitud_google, lng: hogar.longitud_google },
              map,
              title: hogar.nombre_residencia
            });
          }
        });
      } catch (e) {
        console.error("Error cargando residencias:", e);
      }
    }
  </script>

  <!-- Google Maps con callback -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAkpdcq_Ul2DD_sKqgCXr0Cg9TRVwU12Zc&callback=initMap"></script>
</body>
</html>






